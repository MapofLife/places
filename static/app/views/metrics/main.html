<style>
.padded-block { padding-top: 70px; padding-bottom: 80px; }
.supporters a img { width: 200px; }
.supporters a { width: 200px; margin: 20px 25px; }
.supporters div.inst { margin-top: 50px; }
.p_tfm_logo { background-color: #84a726; }
.p_tfm_logo img { background-color: #84a726; height: 85px; padding: 5px; }
.supporters a, .supporters a:hover {
  background-color: transparent;
}
table.metrics { margin-top: 15px; }
table.metrics thead th { font-weight: bold; }
</style>

<div ui-view class="layouts-base scrolling content">
  <div class="location-container">

    <!-- content -->
    <div class="supporters container padded-block">

      <h2 translate>{{ 'nav_metrics' }}</h2>
      <div class="row">
        <div class="col-md-4">
          <div ng-if="metrics.selectedRegion"><img src="static/app/views/metrics/{{ metrics.selectedRegion.name | lowercase }}.png" width="300px" /></div>
        </div>
        <div class="col-md-8">

          <!-- 
          <h4>Top Protected Areas with the Highest Number of <select><option>Amphibian</option><option>Mammals</option></select> Species</h4>
          <div>
            <table class="table metrics">
              <thead>
                <th>Protected area</th>
                <th>Number of expected species</th>
                <th>Number of recorded species</th>
              </thead>
              <tbody>
                <tr>
                  <td>Protected area 1</td>
                  <td>439</td>
                  <td>322</td>
                </tr>
                <tr>
                  <td>Protected area 2</td>
                  <td>234</td>
                  <td>211</td>
                </tr>
                <tr>
                  <td>Protected area 3</td>
                  <td>198</td>
                  <td>197</td>
                </tr>
                <tr>
                  <td>Protected area 4</td>
                  <td>73</td>
                  <td>50</td>
                </tr>
                <tr>
                  <td>Protected area 5</td>
                  <td>19</td>
                  <td>6</td>
                </tr>
              </tbody>
            </table>
          </div> 
          -->
          
          <!-- <div ng-repeat="metric in metrics.data">
            <h4>Top {{ metric.name }} with the highest number of <select ng-options="toppy.taxa for toppy in metric.top5" ng-model="metrics.selected.taxa"></select> species</h4>
            <table class="table metrics">
              <thead>
                <th>Protected area</th>
                <th>Number of expected species</th>
                <th>Number of recorded species</th>
              </thead>
              <tbody>
                <tr ng-repeat="region in metrics.selected.taxa.regions">
                  <td>{{ region.name }}</td>
                  <td>{{ region.expected }}</td>
                  <td>{{ region.recorded }}</td>
                </tr>
              </tbody>
            </table>
          </div> -->

          
          <!-- test -->
          <!-- <div ng-repeat="country in metrics.data_summary_test | filterBy: ['country'] : 'ecuador'">
            <div class="panel panel-default" ng-repeat="metric in country.metrics.summary">
              <div class="panel-heading">
                <h3 class="panel-title">{{ metric.title }} {{ 'nav_metrics' | translate }}</h3>
              </div>
              <table class="table metrics">
                <thead>
                  <tr>
                    <th translate>{{ 'group' }}</th>
                    <th translate>{{ 'expected_species' }}</th>
                    <th translate>{{ 'recorded_species' }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="item in metric.counts">
                    <td translate>{{ item.name }}</td>
                    <td>{{ item.expected }}</td>
                    <td>{{ item.recorded }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div> -->


          <div>
            <select class="form-control selectpicker" ng-if="metrics.regions"
              ng-options="reg.name | translate | capitalize for reg in metrics.regions" ng-model="metrics.selectedRegion">
              <!-- <option value="" translate>sub_region_select</option> -->
            </select>
          </div>

          <!-- <pre>{{ metrics.selectedRegion.region_id }}</pre>
          <pre>{{ metrics.data_summary | filterBy: ['region_id'] : metrics.selectedRegion.region_id }}</pre>
          <pre>{{ metrics.data_summary | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'area_sqkm'} }}</pre> -->

          <!-- <h3>
            Total area: 
            <span class="lead">{{ 
              (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'area_sqkm'} 
                | first).attribute_value 
                | number:0 }} km<sup>2</sup>
              </span> 
              <span class="small">
              {{ ( 1 - ( (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'pa_area_sqkm'} 
                | first).attribute_value 
                /
                (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'area_sqkm'} 
                | first).attribute_value ) ) * 100 | number:2
              }} of area unprotected
            </span> 
          </h3>
          <h3>
            Protected area: 
            <span class="lead">{{ 
              (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'pa_area_sqkm'} 
                | first).attribute_value 
                | number:0 }} km<sup>2</sup>
              </span> 
              <span class="small">
              {{ ( (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'pa_area_sqkm'} 
                | first).attribute_value 
                /
                (metrics.data_summary 
                | where:{region_id: metrics.selectedRegion.region_id, attribute_id: 'area_sqkm'} 
                | first).attribute_value ) * 100 | number:2
              }} of area protected
            </span>
          </h3> -->
          <h4>
            {{'metric_area' | translate}} : 
            <span class="lead">{{ metrics.selectedMetrics.area | number:0 }} km<sup>2</sup></span> 
            <span class="small">{{ metrics.selectedMetrics.upa_pct | number:2 }}{{'metric_percentage_unprotected_area' | translate}}</span> 
          </h4>
          <h4>
            {{'metric_protected_area' | translate}} : 
            <span class="lead">{{ metrics.selectedMetrics.protected_area | number:0 }} km<sup>2</sup></span> 
            <span class="small">{{ metrics.selectedMetrics.pa_pct | number:2 }}{{'metric_percentage_protected_area' | translate}}</span>
          </h4>

          <p class="small">*{{ 'metric_areas_footnote' | translate }}</p>
          
          <hr />

          <!-- <div>
            <select class="form-control selectpicker" ng-if="metrics.regions"
              ng-options="taxa | translate for taxa in metrics.selectedMetrics.taxa_list" 
              ng-model="metrics.selectedRegionTaxa">
            </select>
          </div> -->

          <h4 translate>{{ 'metric_table_heading' }}</h4>

          <div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <select class="form-control selectpicker" ng-if="metrics.regions"
                    ng-options="taxa | translate for taxa in metrics.selectedMetrics.taxa_list | remove: 'turtles': 'plants'" 
                    ng-model="metrics.selectedRegionTaxa">
                  </select>
                </div>
                <table class="table metrics">
                  <thead>
                    <tr>
                      <th translate>{{ 'metric_table_col1' }}</th>
                      <th translate>{{ 'metric_table_col2' }}</th>
                      <th translate>{{ 'metric_table_col3' }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="(key, metric) in metrics.selectedMetrics.species_metrics[metrics.selectedRegionTaxa]">
                      <td translate>{{ key }}</td>
                      <td>{{ metric.country }}</td>
                      <td>{{ metric.protected_areas }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>          


        </div>
      </div>

    </div>
    <!-- /.content -->

  </div>
</div>
